{% extends "base.html" %}
{% load render_table from django_tables2 %}
{% block content %}
    <h1>{{task.title }}</h1>
    <p>
        {% if task.status == 'failed' %}
        <span class="badge bg-danger">{{ task.status }}</span>
        {% elif task.status == 'completed' %}
        <span class="badge bg-success">{{ task.status }}</span>
        {% elif task.status == 'scheduled' %}
        <span class="badge bg-info">{{ task.status }}</span>
        {% else %}
        <span class="badge bg-warning">{{ task.status }}</span>
        {% endif %}
        <span class="text-muted">{{ task.created }}</span>
    </p>
    <div class="">

    </div>
    <div class="lead p-3 mb-3">
        {{ task_result }}
        <a class="btn btn-primary" title="View original comment on Github" href="{{task.comment_url}}"><i class="fa-brands fa-github"></i> Show on Github</a>
        <!-- Button with link to undo page -->
        {% if can_undo %}
        <a class="btn btn-danger" title="Undo marked events" href="{% url 'task_undo' task.id %}"><i class="fa-solid fa-rotate-left"></i> Undo</a>
        {% else %}
        <button class="btn btn-danger" title="None of the task events are reversible" disabled><i class="fa-solid fa-rotate-left"></i> No reversible events</button>
        {% endif %}
    </div>

    {% render_table event_table %}

    <h3 class="mt-5"><i class="fa-solid fa-coins"></i> Used {{ total_cost|floatformat:1 }} Credits</h3>
    {% render_table cost_item_table %}

{% endblock %}